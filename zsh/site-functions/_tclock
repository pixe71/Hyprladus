#compdef tclock

autoload -U is-at-least

_tclock() {
    typeset -A opt_args
    typeset -a _arguments_options
    local ret=1

    if is-at-least 5.2; then
        _arguments_options=(-s -S -C)
    else
        _arguments_options=(-s -C)
    fi

    local context curcontext="$curcontext" state line
    _arguments "${_arguments_options[@]}" : \
'-c+[Foreground color of the clock, possible values are\: a) Any one of\: Black, Red, Green, Yellow, Blue, Magenta, Cyan, Gray, DarkGray, LightRed, LightGreen, LightYellow, LightBlue, LightMagenta, LightCyan, White. b) Hexadecimal color code\: #RRGGBB]:COLOR:_default' \
'--color=[Foreground color of the clock, possible values are\: a) Any one of\: Black, Red, Green, Yellow, Blue, Magenta, Cyan, Gray, DarkGray, LightRed, LightGreen, LightYellow, LightBlue, LightMagenta, LightCyan, White. b) Hexadecimal color code\: #RRGGBB]:COLOR:_default' \
'-s+[Size of the clock, should be a positive integer (>=1)]:SIZE:_default' \
'--size=[Size of the clock, should be a positive integer (>=1)]:SIZE:_default' \
'-h[Print help]' \
'--help[Print help]' \
":: :_tclock_commands" \
"*::: :->tclock" \
&& ret=0
    case $state in
    (tclock)
        words=($line[1] "${words[@]}")
        (( CURRENT += 1 ))
        curcontext="${curcontext%:*:*}:tclock-command-$line[1]:"
        case $line[1] in
            (clock)
_arguments "${_arguments_options[@]}" : \
'-z+[Custome timezone, for example "America/New_York", use local timezone if not specificed]:TIMEZONE:_default' \
'--timezone=[Custome timezone, for example "America/New_York", use local timezone if not specificed]:TIMEZONE:_default' \
'-D[Do not show date]' \
'--no-date[Do not show date]' \
'-S[Do not show seconds]' \
'--no-seconds[Do not show seconds]' \
'-m[Show milliseconds]' \
'--millis[Show milliseconds]' \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(timer)
_arguments "${_arguments_options[@]}" : \
'*-d+[Initial duration for timer, value can be 10s for 10 seconds, 1m for 1 minute, etc. Also accept mulitple duration value and run the timers sequentially, eg. 25m 5m]:DURATIONS:_default' \
'*--duration=[Initial duration for timer, value can be 10s for 10 seconds, 1m for 1 minute, etc. Also accept mulitple duration value and run the timers sequentially, eg. 25m 5m]:DURATIONS:_default' \
'*-t+[Set the title for the timer, also accept mulitple titles for each durations correspondingly]' \
'*--title=[Set the title for the timer, also accept mulitple titles for each durations correspondingly]' \
'*-e+[Command to run when the timer ends]:EXECUTE:_default' \
'*--execute=[Command to run when the timer ends]:EXECUTE:_default' \
'-r[Restart the timer when timer is over]' \
'--repeat[Restart the timer when timer is over]' \
'-M[Hide milliseconds]' \
'--no-millis[Hide milliseconds]' \
'-P[Start the timer paused]' \
'--paused[Start the timer paused]' \
'-Q[Auto quit when time is up]' \
'--quit[Auto quit when time is up]' \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(stopwatch)
_arguments "${_arguments_options[@]}" : \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(countdown)
_arguments "${_arguments_options[@]}" : \
'-t+[The target time to countdown to, eg. "2023-01-01", "20\:00", "2022-12-25 20\:00\:00" or "2022-12-25T20\:00\:00-04\:00"]:TIME:_default' \
'--time=[The target time to countdown to, eg. "2023-01-01", "20\:00", "2022-12-25 20\:00\:00" or "2022-12-25T20\:00\:00-04\:00"]:TIME:_default' \
'-T+[Title or description for countdown show in header]:TITLE:_default' \
'--title=[Title or description for countdown show in header]:TITLE:_default' \
'-c[Continue to countdown after pass the target time]' \
'--continue[Continue to countdown after pass the target time]' \
'-r[Reverse the countdown, a.k.a. countup]' \
'--reverse[Reverse the countdown, a.k.a. countup]' \
'-m[Show milliseconds]' \
'--millis[Show milliseconds]' \
'-h[Print help]' \
'--help[Print help]' \
&& ret=0
;;
(help)
_arguments "${_arguments_options[@]}" : \
":: :_tclock__help_commands" \
"*::: :->help" \
&& ret=0

    case $state in
    (help)
        words=($line[1] "${words[@]}")
        (( CURRENT += 1 ))
        curcontext="${curcontext%:*:*}:tclock-help-command-$line[1]:"
        case $line[1] in
            (clock)
_arguments "${_arguments_options[@]}" : \
&& ret=0
;;
(timer)
_arguments "${_arguments_options[@]}" : \
&& ret=0
;;
(stopwatch)
_arguments "${_arguments_options[@]}" : \
&& ret=0
;;
(countdown)
_arguments "${_arguments_options[@]}" : \
&& ret=0
;;
(help)
_arguments "${_arguments_options[@]}" : \
&& ret=0
;;
        esac
    ;;
esac
;;
        esac
    ;;
esac
}

(( $+functions[_tclock_commands] )) ||
_tclock_commands() {
    local commands; commands=(
'clock:The clock mode displays the current time, the default mode' \
'timer:The timer mode displays the remaining time until the timer is finished' \
'stopwatch:The stopwatch mode displays the elapsed time since it was started' \
'countdown:The countdown timer mode shows the duration to a specific time' \
'help:Print this message or the help of the given subcommand(s)' \
    )
    _describe -t commands 'tclock commands' commands "$@"
}
(( $+functions[_tclock__clock_commands] )) ||
_tclock__clock_commands() {
    local commands; commands=()
    _describe -t commands 'tclock clock commands' commands "$@"
}
(( $+functions[_tclock__countdown_commands] )) ||
_tclock__countdown_commands() {
    local commands; commands=()
    _describe -t commands 'tclock countdown commands' commands "$@"
}
(( $+functions[_tclock__help_commands] )) ||
_tclock__help_commands() {
    local commands; commands=(
'clock:The clock mode displays the current time, the default mode' \
'timer:The timer mode displays the remaining time until the timer is finished' \
'stopwatch:The stopwatch mode displays the elapsed time since it was started' \
'countdown:The countdown timer mode shows the duration to a specific time' \
'help:Print this message or the help of the given subcommand(s)' \
    )
    _describe -t commands 'tclock help commands' commands "$@"
}
(( $+functions[_tclock__help__clock_commands] )) ||
_tclock__help__clock_commands() {
    local commands; commands=()
    _describe -t commands 'tclock help clock commands' commands "$@"
}
(( $+functions[_tclock__help__countdown_commands] )) ||
_tclock__help__countdown_commands() {
    local commands; commands=()
    _describe -t commands 'tclock help countdown commands' commands "$@"
}
(( $+functions[_tclock__help__help_commands] )) ||
_tclock__help__help_commands() {
    local commands; commands=()
    _describe -t commands 'tclock help help commands' commands "$@"
}
(( $+functions[_tclock__help__stopwatch_commands] )) ||
_tclock__help__stopwatch_commands() {
    local commands; commands=()
    _describe -t commands 'tclock help stopwatch commands' commands "$@"
}
(( $+functions[_tclock__help__timer_commands] )) ||
_tclock__help__timer_commands() {
    local commands; commands=()
    _describe -t commands 'tclock help timer commands' commands "$@"
}
(( $+functions[_tclock__stopwatch_commands] )) ||
_tclock__stopwatch_commands() {
    local commands; commands=()
    _describe -t commands 'tclock stopwatch commands' commands "$@"
}
(( $+functions[_tclock__timer_commands] )) ||
_tclock__timer_commands() {
    local commands; commands=()
    _describe -t commands 'tclock timer commands' commands "$@"
}

if [ "$funcstack[1]" = "_tclock" ]; then
    _tclock "$@"
else
    compdef _tclock tclock
fi
